<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ë–∞–∑–∞ Reels —Å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º–∏ 50K+ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 180 –¥–Ω–µ–π">
    <title>–ë–∞–∑–∞ Reels 50K+ | Karina Yoga</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #c084fc;
            --secondary: #fb923c;
            --accent: #fca5a5;
            --dark: #0f172a;
            --darker: #020617;
            --light: #1e293b;
            --lighter: #334155;
            --text: #e2e8f0;
            --text-dim: #94a3b8;
            --success: #86efac;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            background: var(--darker);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #c084fc 0%, #fb923c 100%);
            padding: 2rem;
            border-bottom: 2px solid var(--lighter);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .back-btn {
            display: inline-block;
            color: white;
            text-decoration: none;
            margin-bottom: 1rem;
            font-size: 1rem;
            opacity: 0.9;
            transition: opacity 0.2s;
        }

        .back-btn:hover {
            opacity: 1;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .controls {
            background: var(--dark);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--lighter);
        }

        .search-box {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 0.75rem 1rem;
            background: var(--light);
            border: 1px solid var(--lighter);
            border-radius: 8px;
            color: var(--text);
            font-size: 1rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .stats {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stat-value {
            color: var(--primary);
            font-weight: 600;
        }

        .table-container {
            background: var(--dark);
            border-radius: 12px;
            overflow-x: auto;
            border: 1px solid var(--lighter);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: auto;
            min-width: 800px;
        }

        thead {
            background: var(--light);
            position: relative;
            z-index: 10;
        }

        thead tr {
            background: var(--light);
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--primary);
            border-bottom: 2px solid var(--lighter);
            cursor: pointer;
            user-select: none;
            position: sticky;
            top: 0;
            background: var(--light);
            z-index: 10;
        }

        th.num-col {
            width: 60px;
            text-align: center;
            cursor: default;
        }

        th.num-col:hover {
            background: var(--light);
        }

        th:hover {
            background: var(--lighter);
        }

        td.num-cell {
            text-align: center;
            color: var(--text-dim);
            font-weight: 600;
            font-size: 0.9rem;
            width: 60px;
        }

        th.sortable::after {
            content: ' ‚áÖ';
            opacity: 0.3;
            font-size: 0.8rem;
        }

        th.sorted-asc::after {
            content: ' ‚Üë';
            opacity: 1;
            color: var(--success);
        }

        th.sorted-desc::after {
            content: ' ‚Üì';
            opacity: 1;
            color: var(--success);
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--lighter);
            vertical-align: top;
        }

        tr:hover {
            background: var(--light);
        }

        .author-cell {
            font-weight: 600;
            color: var(--primary);
        }

        .url-cell a {
            color: var(--secondary);
            text-decoration: none;
            word-break: break-all;
        }

        .url-cell a:hover {
            text-decoration: underline;
        }

        .views-cell {
            font-weight: 600;
            color: var(--success);
            white-space: nowrap;
        }

        .date-cell {
            color: var(--text-dim);
            white-space: nowrap;
            font-size: 0.9rem;
        }

        .caption-cell {
            max-width: 400px;
            line-height: 1.5;
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .no-results {
            padding: 3rem;
            text-align: center;
            color: var(--text-dim);
        }

        .loading {
            padding: 3rem;
            text-align: center;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            padding: 2rem;
            flex-wrap: wrap;
        }

        .page-btn {
            padding: 0.5rem 1rem;
            background: var(--light);
            border: 1px solid var(--lighter);
            border-radius: 6px;
            color: var(--text);
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-btn:hover:not(:disabled) {
            background: var(--primary);
            border-color: var(--primary);
        }

        .page-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .page-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }

        .page-info {
            color: var(--text-dim);
        }

        /* Mobile Cards */
        .mobile-cards {
            display: none;
        }

        .reel-card {
            background: var(--light);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid var(--lighter);
            transition: all 0.2s;
        }

        .reel-card:active {
            transform: scale(0.98);
            border-color: var(--primary);
        }

        @media (hover: hover) {
            .reel-card:hover {
                transform: translateY(-2px);
                border-color: var(--primary);
            }
        }

        .reel-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            gap: 1rem;
        }

        .reel-author {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
            word-break: break-word;
        }

        .reel-views {
            font-weight: 600;
            color: var(--success);
            white-space: nowrap;
            font-size: 1rem;
        }

        .reel-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
        }

        .reel-date {
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        .reel-link {
            display: inline-block;
            color: var(--secondary);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            padding: 0.25rem 0;
            min-height: 44px;
            display: inline-flex;
            align-items: center;
        }

        @media (hover: hover) {
            .reel-link:hover {
                text-decoration: underline;
            }
        }

        .reel-caption {
            color: var(--text-dim);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--lighter);
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }

            .header h1 {
                font-size: 1.3rem;
            }

            .container {
                padding: 1rem;
            }

            .controls {
                padding: 1rem;
            }

            .search-input {
                font-size: 16px; /* Prevent iOS zoom on focus */
                padding: 0.875rem 1rem;
            }

            .stats {
                gap: 1rem;
            }

            .stat-item {
                font-size: 0.85rem;
            }

            /* Hide table on mobile */
            .table-container table {
                display: none !important;
            }

            /* Show cards on mobile */
            .mobile-cards {
                display: block;
            }

            .pagination {
                padding: 1rem;
                gap: 0.5rem;
            }

            .page-btn {
                padding: 0.5rem 0.75rem;
                font-size: 0.9rem;
            }

            .page-info {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <a href="index.html" class="back-btn">‚Üê –ì–ª–∞–≤–Ω–∞—è</a>
        <h1>üé¨ –ë–∞–∑–∞ Reels 50K+ –∑–∞ 180 –¥–Ω–µ–π</h1>
    </header>

    <div class="container">
        <div class="controls">
            <div class="search-box">
                <input
                    type="text"
                    id="searchInput"
                    class="search-input"
                    placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ—Ä—É, –æ–ø–∏—Å–∞–Ω–∏—é..."
                >
            </div>
            <div class="stats">
                <div class="stat-item">
                    <span>üìä –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:</span>
                    <span class="stat-value" id="totalRecords">0</span>
                </div>
                <div class="stat-item">
                    <span>üëÅ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–æ:</span>
                    <span class="stat-value" id="displayedRecords">0</span>
                </div>
                <div class="stat-item">
                    <span>üìà –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</span>
                    <span class="stat-value" id="sortStatus">–ù–µ—Ç</span>
                </div>
            </div>
        </div>

        <div class="table-container">
            <div class="loading" id="loadingMessage">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
            <table id="reelsTable" style="display: none;">
                <thead>
                    <tr>
                        <th class="num-col">‚Ññ</th>
                        <th class="sortable" data-column="author">–ê–≤—Ç–æ—Ä</th>
                        <th>URL</th>
                        <th class="sortable" data-column="views">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</th>
                        <th class="sortable" data-column="date">–î–∞—Ç–∞</th>
                        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
            <div class="mobile-cards" id="mobileCards">
            </div>
            <div class="no-results" id="noResults" style="display: none;">
                –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
            </div>
        </div>

        <div class="pagination" id="pagination" style="display: none;">
            <button class="page-btn" id="prevBtn">‚Üê –ù–∞–∑–∞–¥</button>
            <span class="page-info" id="pageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
            <button class="page-btn" id="nextBtn">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
        </div>
    </div>

    <script>
        let reelsData = [];
        let filteredData = [];
        let currentSort = { column: null, direction: 'asc' };
        let currentPage = 1;
        const itemsPerPage = 50;

        // Load JSON data
        async function loadData() {
            try {
                const response = await fetch('filtered_50k_views.json');
                reelsData = await response.json();
                filteredData = [...reelsData];

                document.getElementById('loadingMessage').style.display = 'none';
                document.getElementById('reelsTable').style.display = 'table';
                document.getElementById('pagination').style.display = 'flex';

                updateStats();
                renderTable();
            } catch (error) {
                document.getElementById('loadingMessage').innerHTML =
                    '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message;
            }
        }

        // Update statistics
        function updateStats() {
            document.getElementById('totalRecords').textContent = reelsData.length;
            document.getElementById('displayedRecords').textContent = filteredData.length;
        }

        // Format number with spaces
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        }

        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU');
        }

        // Render table and mobile cards
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            const mobileCards = document.getElementById('mobileCards');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);

            if (pageData.length === 0) {
                document.getElementById('reelsTable').style.display = 'none';
                mobileCards.innerHTML = '';
                document.getElementById('noResults').style.display = 'block';
                document.getElementById('pagination').style.display = 'none';
                return;
            }

            document.getElementById('reelsTable').style.display = 'table';
            document.getElementById('noResults').style.display = 'none';
            document.getElementById('pagination').style.display = 'flex';

            // Render desktop table
            tbody.innerHTML = pageData.map((item, index) => {
                const globalIndex = startIndex + index + 1;
                return `
                <tr>
                    <td class="num-cell">${globalIndex}</td>
                    <td class="author-cell">${item.author}</td>
                    <td class="url-cell">
                        <a href="${item.url}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å ‚Üó</a>
                    </td>
                    <td class="views-cell">${formatNumber(item.views)}</td>
                    <td class="date-cell">${formatDate(item.date)}</td>
                    <td class="caption-cell">${item.caption || ''}</td>
                </tr>
                `;
            }).join('');

            // Render mobile cards
            mobileCards.innerHTML = pageData.map((item, index) => {
                const globalIndex = startIndex + index + 1;
                return `
                <div class="reel-card">
                    <div class="reel-card-header">
                        <div class="reel-author">#${globalIndex} ¬∑ ${item.author}</div>
                        <div class="reel-views">üëÅ ${formatNumber(item.views)}</div>
                    </div>
                    <div class="reel-meta">
                        <div class="reel-date">üìÖ ${formatDate(item.date)}</div>
                        <a href="${item.url}" target="_blank" class="reel-link">–û—Ç–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ ‚Üó</a>
                    </div>
                    ${item.caption ? `<div class="reel-caption">${item.caption}</div>` : ''}
                </div>
                `;
            }).join('');

            updatePagination();
        }

        // Update pagination
        function updatePagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            document.getElementById('pageInfo').textContent =
                `–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${currentPage} –∏–∑ ${totalPages}`;

            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = currentPage === totalPages;
        }

        // Sort table
        function sortTable(column) {
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'asc';
            }

            filteredData.sort((a, b) => {
                let aVal, bVal;

                if (column === 'author') {
                    aVal = a.author.toLowerCase();
                    bVal = b.author.toLowerCase();
                } else if (column === 'views') {
                    aVal = a.views;
                    bVal = b.views;
                } else if (column === 'date') {
                    aVal = new Date(a.date);
                    bVal = new Date(b.date);
                }

                if (currentSort.direction === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });

            // Update sort indicators
            document.querySelectorAll('th.sortable').forEach(th => {
                th.classList.remove('sorted-asc', 'sorted-desc');
                if (th.dataset.column === column) {
                    th.classList.add(currentSort.direction === 'asc' ? 'sorted-asc' : 'sorted-desc');
                }
            });

            const sortLabels = {
                author: '–ê–≤—Ç–æ—Ä',
                views: '–ü—Ä–æ—Å–º–æ—Ç—Ä—ã',
                date: '–î–∞—Ç–∞'
            };
            document.getElementById('sortStatus').textContent =
                `${sortLabels[column]} ${currentSort.direction === 'asc' ? '‚Üë' : '‚Üì'}`;

            currentPage = 1;
            renderTable();
        }

        // Search/filter
        function filterData(searchTerm) {
            const term = searchTerm.toLowerCase();

            filteredData = reelsData.filter(item => {
                return item.author.toLowerCase().includes(term) ||
                       (item.caption && item.caption.toLowerCase().includes(term));
            });

            updateStats();
            currentPage = 1;
            renderTable();
        }

        // Event listeners
        document.querySelectorAll('th.sortable').forEach(th => {
            th.addEventListener('click', () => sortTable(th.dataset.column));
        });

        document.getElementById('searchInput').addEventListener('input', (e) => {
            filterData(e.target.value);
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderTable();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });

        document.getElementById('nextBtn').addEventListener('click', () => {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderTable();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });

        // Initialize
        loadData();
    </script>
</body>
</html>
