# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ê–Ω–∞–ª–∏–∑ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç–∏ –û–±—Ä–∞–±–æ—Ç–∫–∏ –í–∏–¥–µ–æ

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-12-07
**–°–∏—Å—Ç–µ–º–∞:** Gemini Video Analyzer
**API:** Google Gemini 2.5 Flash
**–¢–∞—Ä–∏—Ñ:** Paid Tier 1 (1000 RPM)

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ –°–∏—Å—Ç–µ–º—ã](#1-—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê–Ω–∞–ª–∏–∑ ThreadPoolExecutor –ü–æ–¥—Ö–æ–¥–∞](#2-–∞–Ω–∞–ª–∏–∑-threadpoolexecutor-–ø–æ–¥—Ö–æ–¥–∞)
3. [–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Gemini Batch Mode API](#3-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞-gemini-batch-mode-api)
4. [–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¢–∞–±–ª–∏—Ü–∞](#4-—Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è-—Ç–∞–±–ª–∏—Ü–∞)
5. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏](#5-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
6. [FAQ: –ú–æ–∂–Ω–æ –ª–∏ 50 –≤–∏–¥–µ–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ?](#6-faq-–º–æ–∂–Ω–æ-–ª–∏-50-–≤–∏–¥–µ–æ-–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
7. [–§–∏–Ω–∞–ª—å–Ω—ã–µ –í—ã–≤–æ–¥—ã](#7-—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ-–≤—ã–≤–æ–¥—ã)
8. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#8-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

## 1. –¢–µ–∫—É—â–µ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ –°–∏—Å—Ç–µ–º—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (160 –≤–∏–¥–µ–æ):**
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ: **122/160 –≤–∏–¥–µ–æ (76%)**
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: **311.5 —Å–µ–∫ (~5.2 –º–∏–Ω –Ω–∞ –≤–∏–¥–µ–æ)**
- –î–∏–∞–ø–∞–∑–æ–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏: **39 —Å–µ–∫ ‚Üí 1563 —Å–µ–∫ (~26 –º–∏–Ω)**
- –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: **20 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö workers**

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```yaml
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
  - –ü–æ–¥—Ö–æ–¥: Real-time API + ThreadPoolExecutor (Python)
  - –ú–æ–¥–µ–ª—å: gemini-2.5-flash
  - Retry –º–µ—Ö–∞–Ω–∏–∑–º: ‚úÖ –ï—Å—Ç—å (3 –ø–æ–ø—ã—Ç–∫–∏ —Å exponential backoff)
  - Rate limit: 1000 RPM (Paid Tier 1)
  - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ‚úÖ results/intermediate/
  - Thread-safe: ‚úÖ threading.Lock –¥–ª—è results
```

### –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ–¥–Ω–æ –≤–∏–¥–µ–æ

```
1. Upload request (resumable, ~3 chunks) = 3 –∑–∞–ø—Ä–æ—Å–∞
2. Status checks (PROCESSING ‚Üí ACTIVE)     = 3 –∑–∞–ø—Ä–æ—Å–∞
3. Generate content                        = 1 –∑–∞–ø—Ä–æ—Å
--------------------------------------------------
–ò–¢–û–ì–û:                                     = ~7 –∑–∞–ø—Ä–æ—Å–æ–≤/–≤–∏–¥–µ–æ
```

---

## 2. –ê–Ω–∞–ª–∏–∑ ThreadPoolExecutor –ü–æ–¥—Ö–æ–¥–∞

### –ü–ª—é—Å—ã ‚úÖ

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
   - –í–∏–¥–µ–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ú–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —á–µ—Ä–µ–∑ tqdm progress bar
   - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Å—Ä–∞–∑—É

2. **–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Python `concurrent.futures.ThreadPoolExecutor`
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –õ–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å

3. **–ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–∞**
   - –í–∏–¥–∏—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ú–æ–∂–µ—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç (Ctrl+C)
   - –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

4. **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**
   - –ö–∞–∂–¥–æ–µ –≤–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ü—Ä–∏ —Å–±–æ–µ –Ω–µ —Ç–µ—Ä—è–µ—Ç–µ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ
   - –ú–æ–∂–Ω–æ –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —Å –º–µ—Å—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ú–∏–Ω—É—Å—ã ‚ùå

1. **–°—Ç–æ–∏–º–æ—Å—Ç—å**
   - –ü–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å API –±–µ–∑ —Å–∫–∏–¥–æ–∫ (100%)
   - –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ = –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã

2. **Rate Limit –ø—Ä–æ–±–ª–µ–º—ã**
   - –ú–æ–∂–Ω–æ —É–ø–µ—Ä–µ—Ç—å—Å—è –≤ 1000 RPM –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ workers
   - Burst –Ω–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –≤—Å–µ—Ö workers –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ retry –ª–æ–≥–∏–∫–∏

3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –¢—Ä—É–¥–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å >300-500 –≤–∏–¥–µ–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ
   - –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ workers —Ä–∞—Å—Ç–µ—Ç —Ä–∏—Å–∫ rate limit –æ—à–∏–±–æ–∫
   - –ù—É–∂–Ω–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å vs —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ workers

| Workers | –í—Ä–µ–º—è (160 –≤–∏–¥–µ–æ) | Burst –∑–∞–ø—Ä–æ—Å–æ–≤ | Requests/sec (avg) | –†–∏—Å–∫ rate limit |
|---------|-------------------|----------------|--------------------|-----------------|
| **10**  | **~83 –º–∏–Ω**      | 30 –∑–∞–ø—Ä–æ—Å–æ–≤    | ~1.4 req/s         | ‚úÖ –û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π |
| **20**  | **~41 –º–∏–Ω**      | 60 –∑–∞–ø—Ä–æ—Å–æ–≤    | ~2.7 req/s         | ‚úÖ **–ù–∏–∑–∫–∏–π** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) |
| **30**  | **~28 –º–∏–Ω**      | 90 –∑–∞–ø—Ä–æ—Å–æ–≤    | ~4.0 req/s         | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π     |
| **40**  | **~21 –º–∏–Ω**      | 120 –∑–∞–ø—Ä–æ—Å–æ–≤   | ~5.4 req/s         | ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π     |
| **50**  | **~17 –º–∏–Ω**      | 150 –∑–∞–ø—Ä–æ—Å–æ–≤   | ~6.7 req/s         | ‚ùå –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π |

**–†–∞—Å—á–µ—Ç—ã:**
- RPM limit: 1000 requests/minute
- RPS limit: ~16.7 requests/second
- Burst = workers √ó 3 (upload chunks)
- –ü—Ä–∏ 50 workers: 150 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –ø–µ—Ä–≤—ã–µ 1-2 —Å–µ–∫—É–Ω–¥—ã = **–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞**

**–í—ã–≤–æ–¥:** 20 workers - –û–ü–¢–ò–ú–ê–õ–¨–ù–û –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ —Å–∫–æ—Ä–æ—Å—Ç—å/—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.

---

## 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Gemini Batch Mode API

### –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

**Gemini Batch Mode** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º –æ—Ç Google –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ üéØ

#### 1. –≠–∫–æ–Ω–æ–º–∏—è 50% üí∞

```
–°—Ç–æ–∏–º–æ—Å—Ç—å Real-time API:  100% –±–∞–∑–æ–≤–æ–π —Å—Ç–∞–≤–∫–∏
–°—Ç–æ–∏–º–æ—Å—Ç—å Batch Mode:      50% –±–∞–∑–æ–≤–æ–π —Å—Ç–∞–≤–∫–∏
-------------------------------------------
–≠–∫–æ–Ω–æ–º–∏—è:                  50% –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
```

–î–ª—è 160 –≤–∏–¥–µ–æ —Å avg 311 —Å–µ–∫—É–Ω–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ = **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤**.

#### 2. –í—ã—Å–æ–∫–∏–µ –õ–∏–º–∏—Ç—ã üìà

**Paid Tier 1:**
- Batch enqueued tokens: **3,000,000 —Ç–æ–∫–µ–Ω–æ–≤** –º–∞–∫—Å–∏–º—É–º
- Concurrent batch requests: **100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**
- Input file size: –¥–æ **2 GB** –Ω–∞ submission
- Total storage: **20 GB**

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Real-time:**
- Real-time: 1000 RPM (requests per minute)
- Batch Mode: **200,000+ –∑–∞–ø—Ä–æ—Å–æ–≤** –≤ –æ–¥–Ω–æ–º job

#### 3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚öôÔ∏è

‚úÖ Google —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç:
- –û—á–µ—Ä–µ–¥—å—é –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–µ–π
- Retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- Rate limiting
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞–≥—Ä—É–∑–∫–∏

#### 4. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å üóÇÔ∏è

- –û–¥–∏–Ω batch job –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å **–≤—Å–µ 160 –≤–∏–¥–µ–æ**
- –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å **1000+ –≤–∏–¥–µ–æ** –±–µ–∑ –ø—Ä–æ–±–ª–µ–º
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å burst –Ω–∞–≥—Ä—É–∑–∫–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ Batch Mode ‚è±Ô∏è

#### 1. –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ **–¥–æ 24 —á–∞—Å–æ–≤**
- –ù–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –∑–∞–¥–∞—á

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –ù–µ—Ç progress bar
- –ù–µ–ª—å–∑—è —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å—ã: QUEUED ‚Üí RUNNING ‚Üí COMPLETE

#### 3. –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏
- –¢—Ä—É–¥–Ω–µ–µ debugging –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ù—É–∂–Ω–æ –∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ–≥–æ job
- –ù–µ—Ç –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Batch Mode

```python
# –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ JSONL —Ñ–∞–π–ª–∞ —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏
requests.jsonl:
{"model": "gemini-2.5-flash", "contents": [video1_uri, prompt]}
{"model": "gemini-2.5-flash", "contents": [video2_uri, prompt]}
{"model": "gemini-2.5-flash", "contents": [video3_uri, prompt]}
...

# –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ JSONL —Ñ–∞–π–ª–∞
input_file = client.files.upload(file="requests.jsonl")

# –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ batch job
batch_job = client.batches.create(
    model="gemini-2.5-flash",
    src=input_file.name
)

# –®–∞–≥ 4: Polling —Å—Ç–∞—Ç—É—Å–∞
while batch_job.state == "RUNNING":
    time.sleep(60)
    batch_job = client.batches.get(name=batch_job.name)

# –®–∞–≥ 5: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
results_file = client.files.get(batch_job.output_file_uri)
results = results_file.download()
```

### Best Practices –¥–ª—è Batch Mode

1. **–û–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –º–∞–ª–µ–Ω—å–∫–∏–µ jobs**
   - ‚úÖ –û–¥–∏–Ω job —Å 200,000 –∑–∞–ø—Ä–æ—Å–æ–≤ > 1000 jobs –ø–æ 200 –∑–∞–ø—Ä–æ—Å–æ–≤
   - –õ—É—á—à–∏–π throughput –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Context Caching**
   - –î–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø—Ä–æ–º–ø—Ç–æ–≤
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤

3. **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –Ω–∞ off-peak —á–∞—Å—ã**
   - Fresh daily quotas
   - –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ API**
   ```python
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
   batch_job = client.batches.get(name=job_name)
   print(f"State: {batch_job.state}")
   print(f"Progress: {batch_job.request_count_completed}/{batch_job.request_count_total}")
   ```

---

## 4. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¢–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | ThreadPoolExecutor (20) | ThreadPoolExecutor (50) | Batch Mode API |
|----------|------------------------|-------------------------|----------------|
| **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏** | ~41 –º–∏–Ω—É—Ç | ~17 –º–∏–Ω—É—Ç | –î–æ 24 —á–∞—Å–æ–≤ |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | 100% | 100% | **50%** ‚úÖ |
| **Rate limit —Ä–∏—Å–∫** | –ù–∏–∑–∫–∏–π ‚úÖ | –í—ã—Å–æ–∫–∏–π ‚ùå | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚úÖ |
| **–ü—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** | –î–∞ ‚úÖ | –î–∞ ‚úÖ | –ù–µ—Ç ‚ùå |
| **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±** | –î–æ ~300 –≤–∏–¥–µ–æ | –î–æ ~500 (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ) | **200,000+** ‚úÖ |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è |
| **Retry –ª–æ–≥–∏–∫–∞** | –†—É—á–Ω–∞—è (3 –ø–æ–ø—ã—Ç–∫–∏) | –†—É—á–Ω–∞—è (3 –ø–æ–ø—ã—Ç–∫–∏) | **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è** ‚úÖ |
| **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** | –î–∞ ‚úÖ | –î–∞ ‚úÖ | –ù–µ—Ç ‚ùå |
| **–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞** | –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç ‚úÖ | –í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç ‚úÖ | –¢–æ–ª—å–∫–æ cancel job |
| **Debugging** | –õ–µ–≥–∫–æ ‚úÖ | –õ–µ–≥–∫–æ ‚úÖ | –°–ª–æ–∂–Ω–æ ‚ùå |
| **Use case** | –°—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ | –°—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ) | –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |

---

## 5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°—Ä–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –°–ï–ô–ß–ê–°) ü•á

**–ü–æ–¥—Ö–æ–¥:** ThreadPoolExecutor
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```yaml
# examples/instagram_marketing_config.yaml
batch:
  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞: –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ
  max_workers: 20

  # –ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è (—Å –Ω–µ–±–æ–ª—å—à–∏–º —Ä–∏—Å–∫–æ–º)
  # max_workers: 30

  delay_between_requests: 0.5
  continue_on_error: true
  save_intermediate: true
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è:**
- 20 workers: ~41 –º–∏–Ω—É—Ç–∞ (—Å—Ç–∞–±–∏–ª—å–Ω–æ)
- 30 workers: ~28 –º–∏–Ω—É—Ç (–Ω–µ–±–æ–ª—å—à–æ–π —Ä–∏—Å–∫)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù—É–∂–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞
- –û–±—ä–µ–º: 50-300 –≤–∏–¥–µ–æ
- –í–∞–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ù—É–∂–Ω—ã –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –≠–∫–æ–Ω–æ–º–∏—è + –Ω–µ —Å—Ä–æ—á–Ω–æ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ —Å—É—Ç–∫–∏) ü•à

**–ü–æ–¥—Ö–æ–¥:** Batch Mode API
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

```
‚úÖ 50% —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ API costs
‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å rate limits
‚úÖ –ú–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç—ã—Å—è—á–∏ –≤–∏–¥–µ–æ
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry
‚è±Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**

1. **–ù–æ–≤—ã–π –º–æ–¥—É–ª—å:** `batch_mode_processor.py`
   ```python
   class BatchModeProcessor:
       def prepare_jsonl(self, video_list, prompt):
           """–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ JSONL —Ñ–æ—Ä–º–∞—Ç"""

       def submit_batch(self, jsonl_file):
           """–û—Ç–ø—Ä–∞–≤–∫–∞ batch job"""

       def poll_status(self, batch_job_id):
           """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞"""

       def download_results(self, output_file_uri):
           """–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –ø–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"""
   ```

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π:**
   ```yaml
   # config.yaml
   mode: "batch"  # –∏–ª–∏ "realtime"

   batch_mode:
     check_interval: 300  # 5 –º–∏–Ω—É—Ç
     max_wait_time: 86400  # 24 —á–∞—Å–∞
   ```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ —Å—Ä–æ—á–Ω—ã (–º–æ–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å —Å—É—Ç–∫–∏)
- –û–±—ä–µ–º: 500+ –≤–∏–¥–µ–æ
- –í–∞–∂–Ω–∞ —ç–∫–æ–Ω–æ–º–∏—è –±—é–¥–∂–µ—Ç–∞
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è –º–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ü•â

**–ö–æ–º–±–∏–Ω–∞—Ü–∏—è:**

```python
# –£–º–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –∑–∞–¥–∞—á
def process_videos(video_list, urgent=False):
    if urgent or len(video_list) < 100:
        # –°—Ä–æ—á–Ω–æ –∏–ª–∏ –º–∞–ª–æ –≤–∏–¥–µ–æ ‚Üí ThreadPoolExecutor
        return realtime_process(video_list, workers=20)
    else:
        # –ù–µ —Å—Ä–æ—á–Ω–æ –∏ –º–Ω–æ–≥–æ –≤–∏–¥–µ–æ ‚Üí Batch Mode
        return batch_mode_process(video_list)
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
1. **–°—Ä–æ—á–Ω—ã–µ –≤–∏–¥–µ–æ** ‚Üí ThreadPoolExecutor (20-30 workers)
2. **–ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Üí Batch Mode API
3. **–°–º–µ—à–∞–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä

---

## 6. FAQ: –ú–æ–∂–Ω–æ –ª–∏ 50 –≤–∏–¥–µ–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ?

### –í–æ–ø—Ä–æ—Å: "–ú–æ–∂–Ω–æ –ª–∏ —Å—Ä–∞–∑—É 50 –≤–∏–¥–µ–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å?"

#### –° —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (ThreadPoolExecutor):

‚ùå **–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**

**–ü—Ä–∏—á–∏–Ω–∞ 1: Burst –Ω–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ**
```
50 workers –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
‚Üí 50 –≤–∏–¥–µ–æ –Ω–∞—á–∏–Ω–∞—é—Ç upload
‚Üí 50 √ó 3 upload chunks = 150 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 1-2 —Å–µ–∫—É–Ω–¥—ã
‚Üí RPM limit = 1000/60 = 16.7 req/sec
‚Üí 150 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ >> 16.7 req/sec
‚Üí Rate limit error 429 RESOURCE_EXHAUSTED
```

**–ü—Ä–∏—á–∏–Ω–∞ 2: –ù–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**
```
API –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤–æ–ª–Ω–∞–º–∏:
- –í–æ–ª–Ω–∞ 1 (t=0s):    Upload –≤—Å–µ—Ö 50 –≤–∏–¥–µ–æ ‚Üí 150 –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–æ–ª–Ω–∞ 2 (t=10s):   Status checks       ‚Üí 50-100 –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–æ–ª–Ω–∞ 3 (t=30-600s): Generate content   ‚Üí 50 –∑–∞–ø—Ä–æ—Å–æ–≤
```

**–≠–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:**
- 20 workers: **0 rate limit –æ—à–∏–±–æ–∫** (–∏–∑ 122 –≤–∏–¥–µ–æ)
- 30 workers: **–æ–∂–∏–¥–∞–µ–º–æ 5-10% –æ—à–∏–±–æ–∫**
- 50 workers: **–æ–∂–∏–¥–∞–µ–º–æ 30-50% –æ—à–∏–±–æ–∫**

#### –° Batch Mode API:

‚úÖ **–î–ê, –º–æ–∂–Ω–æ 50, 100, 200+ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º**

**–ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
1. –í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –æ–¥–∏–Ω JSONL —Ñ–∞–π–ª —Å 50 –≤–∏–¥–µ–æ
2. Google —Å–∞–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É
3. –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ rate limits
5. –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
```

**–ü—Ä–∏–º–µ—Ä:**
```python
# Batch Mode –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å
batch_job = client.batches.create(
    model="gemini-2.5-flash",
    src="requests_50_videos.jsonl"  # 50 –≤–∏–¥–µ–æ
)
# –ò–ª–∏ –¥–∞–∂–µ
batch_job = client.batches.create(
    model="gemini-2.5-flash",
    src="requests_10000_videos.jsonl"  # 10,000 –≤–∏–¥–µ–æ!
)
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç:

**–î–ª—è ThreadPoolExecutor:**
```python
# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
max_workers = 20  # ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ
max_workers = 30  # ‚ö†Ô∏è –ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
max_workers = 50  # ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
```

**–î–ª—è Batch Mode:**
```python
# –õ—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
videos = 50      # ‚úÖ OK
videos = 500     # ‚úÖ OK
videos = 5000    # ‚úÖ OK
videos = 50000   # ‚úÖ OK (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–æ–≤ Tier)
```

---

## 7. –§–∏–Ω–∞–ª—å–Ω—ã–µ –í—ã–≤–æ–¥—ã

### ThreadPoolExecutor (—Ç–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞)

#### ‚úÖ –û–ü–¢–ò–ú–ê–õ–¨–ù–û –¥–ª—è:
- **50-300 –≤–∏–¥–µ–æ** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–°—Ä–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞)
- –ù—É–∂–µ–Ω **–∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –í–∞–∂–Ω—ã **–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
- **–¢–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏** (160 –≤–∏–¥–µ–æ, –Ω—É–∂–Ω—ã —Å–µ–π—á–∞—Å)

#### ‚ùå –ù–ï –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è:
- **–ú–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏** (1000+ –≤–∏–¥–µ–æ)
- **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞—Ç—Ä–∞—Ç** (–Ω–µ—Ç —Å–∫–∏–¥–æ–∫)
- **–ò–∑–±–µ–∂–∞–Ω–∏—è rate limit –ø—Ä–æ–±–ª–µ–º**
- –û–±—Ä–∞–±–æ—Ç–∫–∏ **–≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ**

#### –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```yaml
batch:
  max_workers: 20        # –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
  continue_on_error: true
  save_intermediate: true
  retry_attempts: 3
```

### Batch Mode API

#### ‚úÖ –û–ü–¢–ò–ú–ê–õ–ï–ù –¥–ª—è:
- **–≠–∫–æ–Ω–æ–º–∏—è 50%** - –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ **500+ –≤–∏–¥–µ–æ**
- **–†–µ–≥—É–ª—è—Ä–Ω–∞—è –º–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**
- **–ù–µ —Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏** (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ 24—á)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**

#### ‚ùå –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- **–°—Ä–æ—á–Ω—ã—Ö –∑–∞–¥–∞—á** (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω—É–∂–Ω—ã —Å–µ–π—á–∞—Å)
- –ù—É–∂–µ–Ω **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
- **–ú–∞–ª–µ–Ω—å–∫–∏–µ –æ–±—ä–µ–º—ã** (<50 –≤–∏–¥–µ–æ, –Ω–µ –≤—ã–≥–æ–¥–Ω–æ)
- –¢—Ä–µ–±—É–µ—Ç—Å—è **–∫–æ–Ω—Ç—Ä–æ–ª—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**

#### –ö–æ–≥–¥–∞ –≤–Ω–µ–¥—Ä—è—Ç—å:
```
IF —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ >300 –≤–∏–¥–µ–æ
   AND —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ —Å—Ä–æ—á–Ω—ã
   THEN –≤–Ω–µ–¥—Ä–∏—Ç—å Batch Mode (—ç–∫–æ–Ω–æ–º–∏—è 50%)

IF —Å—Ä–æ—á–Ω–æ –ò–õ–ò <200 –≤–∏–¥–µ–æ
   THEN –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ThreadPoolExecutor
```

---

## 8. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ç–µ–∫—É—â–∏—Ö 160 –≤–∏–¥–µ–æ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```yaml
# examples/instagram_marketing_config.yaml
batch:
  max_workers: 20  # ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ, ~40 –º–∏–Ω—É—Ç
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–µ–µ):**
```yaml
batch:
  max_workers: 30  # ‚ö†Ô∏è –†–∏—Å–∫–æ–≤–∞–Ω–Ω–æ, ~28 –º–∏–Ω—É—Ç, –≤–æ–∑–º–æ–∂–Ω—ã 5-10% –æ—à–∏–±–æ–∫
```

**–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
```yaml
batch:
  max_workers: 50  # ‚ùå –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ rate limit –æ—à–∏–±–æ–∫ (30-50%)
```

### –î–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–¥–∞—á

#### –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ:

**–°—Ü–µ–Ω–∞—Ä–∏–π A: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 100-500 –≤–∏–¥–µ–æ**
```python
# –í–Ω–µ–¥—Ä–∏—Ç—å Batch Mode
# ROI: –≠–∫–æ–Ω–æ–º–∏—è 50% √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ √ó —á–∞—Å—Ç–æ—Ç–∞
# –ü—Ä–∏–º–µ—Ä: 300 –≤–∏–¥–µ–æ/–¥–µ–Ω—å √ó 30 –¥–Ω–µ–π = 9000 –≤–∏–¥–µ–æ/–º–µ—Å—è—Ü
# –≠–∫–æ–Ω–æ–º–∏—è: –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞ —Ç–æ–∫–µ–Ω–∞—Ö
```

**–°—Ü–µ–Ω–∞—Ä–∏–π B: –†–∞–∑–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ <200 –≤–∏–¥–µ–æ**
```python
# –û—Å—Ç–∞–≤–∏—Ç—å ThreadPoolExecutor
# –ü—Ä–æ—Å—Ç–æ—Ç–∞ > —ç–∫–æ–Ω–æ–º–∏—è –¥–ª—è —Ä–µ–¥–∫–∏—Ö –∑–∞–¥–∞—á
```

**–°—Ü–µ–Ω–∞—Ä–∏–π C: –°–º–µ—à–∞–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**
```python
# –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
def smart_process(videos, deadline_hours=24):
    if deadline_hours < 2 or len(videos) < 100:
        return realtime_process(videos)
    else:
        return batch_process(videos)
```

### –û—Ü–µ–Ω–∫–∞ —ç–∫–æ–Ω–æ–º–∏–∏ –ø—Ä–∏ Batch Mode

**–†–∞—Å—á–µ—Ç –¥–ª—è 160 –≤–∏–¥–µ–æ:**
```
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 311 —Å–µ–∫—É–Ω–¥
–°—Ä–µ–¥–Ω–∏–µ —Ç–æ–∫–µ–Ω—ã –Ω–∞ –≤–∏–¥–µ–æ: ~50,000 (–ø—Ä–∏–º–µ—Ä–Ω–æ)

Real-time —Å—Ç–æ–∏–º–æ—Å—Ç—å:
  160 –≤–∏–¥–µ–æ √ó 50,000 —Ç–æ–∫–µ–Ω–æ–≤ √ó $X = $Y

Batch Mode —Å—Ç–æ–∏–º–æ—Å—Ç—å:
  160 –≤–∏–¥–µ–æ √ó 50,000 —Ç–æ–∫–µ–Ω–æ–≤ √ó $X √ó 0.5 = $Y/2

–≠–∫–æ–Ω–æ–º–∏—è: 50% –∏–ª–∏ $Y/2
```

*–î–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ metadata –≤–∞—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.*

### –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**Phase 1: –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ (160 –≤–∏–¥–µ–æ)**
```
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ThreadPoolExecutor —Å 20 workers
‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É (~40 –º–∏–Ω—É—Ç)
‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

**Phase 2: –ê–Ω–∞–ª–∏–∑ (–ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è)**
```
‚ñ° –ü–æ—Å—á–∏—Ç–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ API
‚ñ° –û—Ü–µ–Ω–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –±—É–¥—É—â–∏—Ö –∑–∞–¥–∞—á
‚ñ° –†–µ—à–∏—Ç—å: –≤–Ω–µ–¥—Ä—è—Ç—å –ª–∏ Batch Mode
```

**Phase 3: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Batch Mode (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
```
‚ñ° –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å batch_mode_processor.py
‚ñ° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 10-20 –≤–∏–¥–µ–æ
‚ñ° –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π
‚ñ° –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

**–ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:**

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   ```python
   metrics = {
       "avg_processing_time": 311.5,  # —Å–µ–∫—É–Ω–¥
       "success_rate": 122/160,       # 76%
       "error_rate": 38/160,          # 24%
       "throughput": 160/41           # ~3.9 –≤–∏–¥–µ–æ/–º–∏–Ω (20 workers)
   }
   ```

2. **–°—Ç–æ–∏–º–æ—Å—Ç—å:**
   ```python
   costs = {
       "total_tokens": sum_all_tokens,
       "cost_per_video": total_cost / 160,
       "monthly_projection": cost_per_video * monthly_volume
   }
   ```

3. **Rate Limits:**
   ```python
   rate_limit_errors = count_429_errors()
   if rate_limit_errors > 0.05 * total_requests:
       # Reduce workers –∏–ª–∏ switch to Batch Mode
   ```

---

## –°—Å—ã–ª–∫–∏ –∏ –†–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Google

- [Gemini API Rate Limits](https://ai.google.dev/gemini-api/docs/rate-limits)
- [Batch Mode Overview](https://developers.googleblog.com/en/scale-your-ai-workloads-batch-mode-gemini-api/)
- [Video Understanding Guide](https://ai.google.dev/gemini-api/docs/video-understanding)
- [AI Studio Dashboard](https://aistudio.google.com/usage)

### –ü—Ä–∏–º–µ—Ä—ã –∏ –∫–µ–π—Å—ã

- [Reforged Labs Case Study](https://developers.googleblog.com/en/scale-your-ai-workloads-batch-mode-gemini-api/#reforged-labs) - –∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ —Ä–µ–∫–ª–∞–º—ã
- [Vals AI Benchmarking](https://developers.googleblog.com/en/scale-your-ai-workloads-batch-mode-gemini-api/#vals-ai) - –æ—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–µ–π

### –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

- [README.md](../README.md) - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [QUICKSTART.md](../QUICKSTART.md) - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [INSTAGRAM_MARKETING_GUIDE.md](../INSTAGRAM_MARKETING_GUIDE.md) - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [examples/instagram_marketing_config.yaml](../examples/instagram_marketing_config.yaml) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## Changelog

### 2025-12-07
- –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã (122 –≤–∏–¥–µ–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ)
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ ThreadPoolExecutor vs Batch Mode API
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è 160 –≤–∏–¥–µ–æ
- –†–∞—Å—á–µ—Ç—ã –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç–∏ workers (10-50)

---

**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** Claude Code
**–î–∞—Ç–∞:** 2025-12-07
**–í–µ—Ä—Å–∏—è:** 1.0
